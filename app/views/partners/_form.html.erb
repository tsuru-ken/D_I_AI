<%= form_with(model: @partner, local: true ,url: choose_new_or_edit ) do |form| %>
  <% if @partner.errors.any? %>
  <div id="error_explanation">
    <h2><%= @partner.errors.count %>件のエラーがあります。</h2>
    <ul>
    <% @partner.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
<% end %>

  <div class="partner_name">
    <%= form.label :name ,"会社名" %>
    <%= form.text_field :name %>
  </div>
  <div class="partner_address">
    <%= form.label :address, "所在地"%>
    <%= form.text_field :address %>
  </div>
  <div class="partner_address">
    <%= form.label :url, "会社URL"%>
    <%= form.text_field :url %>
  </div>
  <div class="partner_established">
    <%= form.label :established, "会社設立年"%>
    <%= form.text_field :established %>
  </div>
  <div class="partner_service">
    <%= form.label :service ,"サービス概要"%>
    <%= form.text_area :service %>
  </div>
  <div class="partner_provision">
    <%= form.label :provision,"クラウド/オンプレミス" %>
    <%= form.select :provision, Partner.provisions.keys, include_blank: "" %>
  </div>
  <li>提供サービス</li>
    <div class="field">
      <%= form.collection_check_boxes(:service_content_ids, ServiceContent.all, :id, :division) %>
    </div>
  <li>AIカテゴリー</li>
    <div class="field">
      <%= form.collection_check_boxes(:ai_category_ids, AiCategory.all, :id, :genre) %>
    </div>
  <li>コスト感</li>
    <div class="field">
      <%= form.collection_check_boxes(:cost_ids, Cost.all, :id, :breakdown) %>
    </div>
  <div class="partner_engineer">
    <%= form.label :engineer ,"技術者数"%>
    <%= form.text_field :engineer %>
  </div>

  <div class="partner_case">
    <%= form.label :case,"導入事例" %>
    <%= form.text_field :case %>
  </div>

<li>製品事例</li>
<%= form.fields_for :product_infos do |product_info_form| %>
  <%= product_info_form.label :name, '製品説明' %>
  <%= product_info_form.text_area :name %>

  <%= product_info_form.label :content, '製品事例URL' %>
  <%= product_info_form.text_field :content %>

  <%= image_tag(product_info_form.object.image.url) if product_info_form.object.image.present? %>
  <%= product_info_form.label :image %>
  <%= product_info_form.file_field :image %>
<% end %>

  <li>導入事例</li>
  <%= form.fields_for :case_studies do |case_study_form| %>
  <%= case_study_form.label :name, '導入事例説明' %>
  <%= case_study_form.text_area :name %>

  <%= case_study_form.label :content, '導入事例URL' %>
  <%= case_study_form.text_field :content %>

  <%= image_tag(case_study_form.object.image.url) if case_study_form.object.image.present? %>
  <%= case_study_form.label :image, '導入事例画像' %>
  <%= case_study_form.file_field :image %>
<% end %>
  <p>
    <%= form.submit %>
  </P>

<% end %>

<%= link_to "会社一覧画面にもどる", partners_path %>
